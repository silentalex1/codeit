<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Bridge</title>
    <style>
        html,body{margin:0;width:100%;height:100%;background:#0a0a0a;font-family:sans-serif;color:#eaeaea;overflow:hidden}
        .center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
        .card{background:#121212;border:1px solid #1f1f1f;border-radius:16px;padding:40px 60px;font-size:28px;text-align:center}
        
        #green-alert {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: #22c55e;
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: bold;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            z-index: 9999;
            opacity: 0;
        }
        #green-alert.visible { top: 30px; opacity: 1; }
    </style>
</head>
<body>
    <div id="green-alert">plugin connected.</div>
    <div class="center">
        <div class="card" id="status-display">Awaiting Request...</div>
    </div>

    <script>
        (function() {
            const uiText = document.getElementById("status-display");
            const alertBox = document.getElementById("green-alert");
            let isDone = false;

            async function checkBridge() {
                if (isDone) return;
                try {
                    const response = await fetch('/sync');
                    const data = await response.json();
                    
                    if (data.status === 'connected') {
                        isDone = true;
                        uiText.innerText = "connection sucess";
                        alertBox.classList.add("visible");
                        console.log("codedit copilot plugin connected.");
                        
                        setTimeout(() => {
                            alertBox.classList.remove("visible");
                        }, 4000);
                    }
                } catch (err) {}
            }
            setInterval(checkBridge, 1000);
        })();
    </script>
</body>
</html>
