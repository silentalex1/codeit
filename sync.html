<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bridge</title>
<style>
html,body{margin:0;width:100%;height:100%;background:#0a0a0a;font-family:system-ui,Segoe UI,Roboto,Arial;color:#eaeaea}
.center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
.card{background:#121212;border:1px solid #1f1f1f;border-radius:16px;padding:40px 60px;font-size:28px;box-shadow:0 20px 40px rgba(0,0,0,.4)}
</style>
</head>
<body>
<div class="center">
<div class="card" id="ui">test</div>
</div>
<script>
const endpoint="/bridge"
window.addEventListener("load",()=>{
fetch(endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ready:true})}).catch(()=>{})
})
async function handle(req){
const body=await req.json()
console.log(body.msg)
return new Response(JSON.stringify({ok:true}),{headers:{"Content-Type":"application/json"}})
}
if("serviceWorker"in navigator){
navigator.serviceWorker.register(URL.createObjectURL(new Blob([`
self.addEventListener("fetch",e=>{
if(new URL(e.request.url).pathname==="/bridge"){
e.respondWith((async()=>{
const data=await e.request.json()
console.log(data.msg)
return new Response(JSON.stringify({ok:true}),{headers:{"Content-Type":"application/json"}})
})())
}
})
`],{type:"text/javascript"})))
}
</script>
</body>
</html>
